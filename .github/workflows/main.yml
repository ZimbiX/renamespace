name: CI
on:
  - push
  - pull_request
  - workflow_dispatch
jobs:

  check-style:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Docker layer caching
        uses: satackey/action-docker-layer-caching@v0.0.11
      - name: RuboCop
        run: auto/check-style

  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Docker layer caching
        uses: satackey/action-docker-layer-caching@v0.0.11
      - name: RSpec
        run: auto/test
